<html>
<head>
    <script type="text/javascript" src="src/utils.js"></script>
    <script type="text/javascript" src="src/globalConstants.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="src/two.js"></script>
    <script type="text/javascript" src="src/Agent/agent.js"></script>
    <script type="text/javascript" src="src/Swarm/swarm.js"></script>
    <script type="text/javascript" src="src/Targets/mouseTarget.js"></script>
    <script type="text/javascript" src="src/Targets/target.js"></script>
    <script type="text/javascript" src="src/Targets/targetCollection.js"></script>
    <script type="text/javascript" src="src/Targets/targetGroup.js"></script>
    <script type="text/javascript" src="src/Targets/targetGroupCache.js"></script>



    <style>
        body {
            background-color: black;
            color: white;
        }

        #canvas {
            height: 90%;
            width: 90%;
        }
    </style>
</head>
<body>
<div id="canvas" style="background: black"></div>
<script type="text/javascript">
    randomInt(1, 32)
    let elem = document.getElementById('canvas');
    const playArea = {
        width: $(window).width() - 20,
        height: $(window).height() - 40
    };

    let two = new Two(playArea).appendTo(elem);

    let beeCollection = new Swarm(two, playArea),
        targetCollection = new TargetCollection(two, playArea);

    targetCollection.spawnMouseTarget();

    for (let i = 0; i < TARGETS_AMOUNT; i++) {
        targetCollection.spawnTarget();
    }

    for(let i = 0; i < AGENTS_AMOUNT; i ++) {
        beeCollection.spawnAgent(i);
    }

    const targetGroupCache = new TargetGroupCache(targetCollection);

    two.bind('update', function () {
        targetCollection.update();

        const groupedBees = targetGroupCache.getGroup(beeCollection.agents);
        beeCollection.update(groupedBees);
    });

    two.play();
</script>
</body>
</html>
